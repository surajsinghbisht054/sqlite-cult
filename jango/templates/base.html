<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}SQLite Cult{% endblock %}</title>
    <link rel="stylesheet" href="{% load static %}{% static 'css/style.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">
            <a href="{% url 'database_list' %}" class="logo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                    <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                    <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                </svg>
                <span>SQLite Cult</span>
            </a>
        </div>
        <div class="navbar-menu">
            {% if user.is_authenticated %}
                <div class="navbar-links">
                    <a href="{% url 'database_list' %}" class="nav-link {% if request.resolver_match.url_name == 'database_list' %}active{% endif %}">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                            <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                            <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                        </svg>
                        <span>Databases</span>
                    </a>
                    <a href="{% url 'dashboard_list' %}" class="nav-link {% if 'dashboard' in request.resolver_match.url_name %}active{% endif %}">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="3" y1="9" x2="21" y2="9"></line>
                            <line x1="9" y1="21" x2="9" y2="9"></line>
                        </svg>
                        <span>Dashboards</span>
                    </a>
                </div>
                <div class="navbar-divider"></div>
                <div class="navbar-user-section">
                    <div class="navbar-user">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span>{{ user.username }}</span>
                    </div>
                    <form method="post" action="{% url 'logout' %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-ghost btn-sm">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            Logout
                        </button>
                    </form>
                </div>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-ghost">Login</a>
                <a href="{% url 'register' %}" class="btn btn-primary">Register</a>
            {% endif %}
        </div>
    </nav>

    {% if messages %}
    <div class="messages-container">
        {% for message in messages %}
        <div class="message message-{{ message.tags }}" onclick="this.remove()">
            <span class="message-text">{{ message|linebreaksbr }}</span>
            <button class="message-close">&times;</button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <footer class="footer">
        <p>&copy; 2025 SQLite Cult - Web-based SQLite Database Browser</p>
    </footer>

    <script src="{% load static %}{% static 'js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
